(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{172:function(e,t,n){},182:function(e,t,n){},192:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"addPlayerCards",function(){return D}),n.d(r,"editNumPlayers",function(){return C}),n.d(r,"updateHistogram",function(){return G}),n.d(r,"updateOdds",function(){return U}),n.d(r,"updateGame",function(){return N});var a={};n.r(a),n.d(a,"fetchUser",function(){return j}),n.d(a,"signOut",function(){return F}),n.d(a,"getGames",function(){return Y}),n.d(a,"setGame",function(){return q}),n.d(a,"newGame",function(){return z});var o=n(1),s=n(42),i=n(6),u=n(2),c=n(4),l=n(89),d=n(5),p=n(14),m=[["AA","AKs","AQs","AJs","ATs","A9s","A8s","A7s","A6s","A5s","A4s","A3s","A2s"],["AKo","KK","KQs","KJs","KTs","K9s","K8s","K7s","K6s","K5s","K4s","K3s","K2s"],["AQo","KQo","QQ","QJs","QTs","Q9s","Q8s","Q7s","Q6s","Q5s","Q4s","Q3s","Q2s"],["AJo","KJo","QJo","JJ","JTs","J9s","J8s","J7s","J6s","J5s","J4s","J3s","J2s"],["ATo","KTo","QTo","JTo","TT","T9s","T8s","T7s","T6s","T5s","T4s","T3s","T2s"],["A9o","K9o","Q9o","J9o","T9o","99","98s","97s","96s","95s","94s","93s","92s"],["A8o","K8o","Q8o","J8o","T8o","98o","88","87s","86s","85s","84s","83s","82s"],["A7o","K7o","Q7o","J7o","T7o","97o","87o","77","76s","75s","74s","73s","72s"],["A6o","K6o","Q6o","J6o","T6o","96o","86o","76o","66","65s","64s","63s","62s"],["A5o","K5o","Q5o","J5o","T5o","95o","85o","75o","65o","55","54s","53s","52s"],["A4o","K4o","Q4o","J4o","T4o","94o","84o","74o","64o","54o","44","43s","42s"],["A3o","K3o","Q3o","J3o","T3o","93o","83o","73o","63o","53o","43o","33","32s"],["A2o","K2o","Q2o","J2o","T2o","92o","82o","72o","62o","52o","42o","32o","22 "]],f=function(e){return e.toLowerCase().replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()}).replace(/_/g," ")},h=function(e){if(2===e.length){if("os"===e[0].suit)return e[0].card+e[1].card+"o";if("ss"===e[0].suit)return e[0].card+e[1].card+"s"}return e.reduce(function(e,t){return e+t.str},"")},E=function(e){if(2===e.length)return{0:e[0].str,1:e[1].str};throw Error("invalid input")},g=function(e){return[y(e[0]),y(e[1])]},y=function(e){return{card:e[0],suit:e[1],str:e}},_="https://aw4hzcvs3f.execute-api.us-east-1.amazonaws.com/dev/api/",A={histogram:function(e){return void 0===e&&(e=""),e?_+"/histogram?iters="+e:_+"/histogram"},odds:function(e){return void 0===e&&(e=""),e?_+"/odds?iters="+e:_+"/odds"}};function v(e,t){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(n){return[2,fetch(e,{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"}).then(function(e){return e.json()})]})})}var T=function(e){return Math.round(100*e*100)/100};var b,w=function(e,t,n){var r=t.map(function(e){return[]});return e.forEach(function(e,t){e.odds.forEach(function(e,n){r[n][t]=e})}),r.map(function(e,n){return e.reduce(function(e,t){return{win:e.win+t.win,tie:e.tie+t.tie,hand:t.hand}},t[n])}).map(function(t){return"random"===t.hand?{win:T(t.win/e.length/n),tie:T(t.tie/e.length/n),hand:t.hand}:{win:T(t.win/e.length),tie:T(t.tie/e.length),hand:t.hand}})};!function(e){e.UPDATE="UPDATE",e.UPDATE_PLAYER_CARDS="UPDATE_PLAYER_CARDS",e.ADD_OTHER_CARDS="OTHER_CARDS",e.ADD_BOARD="ADD_BOARD",e.NUMBER_OF_PLAYERS="NUMBER_OF_PLAYERS",e.UPDATE_HISTOGRAM="UPDATE_HISTOGRAM",e.UPDATE_ODDS="UPDATE_ODDS",e.UPDATE_ID="UPDATE_ID"}(b||(b={}));var D=function(e){return function(t){var n=[];if(2===e.length||3===e.length){var r=3===e.length?e[e.length-1]:"o";n=[{card:e[0],suit:r+"s",str:""},{card:e[1],suit:r+"s",str:""}]}else 4===e.length&&(n=[{card:e[0],suit:e[1],str:e.substring(0,2)},{card:e[2],suit:e[3],str:e.substring(2,4)}]);t({payload:n,type:b.UPDATE_PLAYER_CARDS})}},C=function(e){return function(t){t({payload:e,type:b.NUMBER_OF_PLAYERS})}},G=function(e){return function(t){(function(e,t,n){return u.__awaiter(this,void 0,void 0,function(){var r,a;return u.__generator(this,function(o){switch(o.label){case 0:r={hand:h(e)},t.length&&(r.others=t.map(function(e){return h(e)})),n.length&&(r.board=h(n)),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,v(A.histogram("10000"),r)];case 2:return a=o.sent().histogram,[2,Object.keys(a).map(function(e){return{x:a[e],y:f(e)}})];case 3:return o.sent(),[2,[]];case 4:return[2]}})})})(e.hand,e.others,e.board).then(function(e){return t({payload:e,type:b.UPDATE_HISTOGRAM})})}},U=function(e,t){return function(n){(function(e,t,n){return void 0===n&&(n=5),u.__awaiter(this,void 0,void 0,function(){var r,a,o,s,i,l;return u.__generator(this,function(u){switch(u.label){case 0:r={hands:e.map(function(e){return c.isEmpty(e)?".":h(e)})},a=e.filter(c.isEmpty).length,t.length&&(r.board=h(t)),u.label=1;case 1:return u.trys.push([1,5,,6]),[0,1].includes(a)?[4,v(A.odds(),r)]:[3,3];case 2:return[2,u.sent().odds.map(function(e){return{hand:e.hand,win:T(e.win),tie:T(e.tie)}})];case 3:for(o=[],s=0;s<n;s++)o.push(v(A.odds("10"),r));return[4,Promise.all(o)];case 4:return i=u.sent(),l=e.map(function(e){return{win:0,tie:0,hand:c.isEmpty(e)?"random":h(e)}}),[2,w(i,l,a)];case 5:return u.sent(),[2,[]];case 6:return[2]}})})})(e,t).then(function(e){n({payload:e,type:b.UPDATE_ODDS})})}},N=function(e){return function(t){t({payload:e,type:b.UPDATE})}},O=n(13),P={board:[],others:[],player:[],player_count:2,histogram:["high_card","pair","two_pair","set","straight","flush","full_house","quads","straight_flush","royal_flush"].map(function(e){return{x:0,y:f(e)}}),odds:[],id:"",createdAt:O.firestore.Timestamp.fromDate(new Date),updatedAt:null},S=function(e,t){switch(void 0===e&&(e=P),t.type){case b.UPDATE_PLAYER_CARDS:return u.__assign({},e,{player:t.payload});case b.NUMBER_OF_PLAYERS:return u.__assign({},e,{player_count:t.payload});case b.ADD_BOARD:return u.__assign({},e,{game:t.payload});case b.ADD_OTHER_CARDS:return u.__assign({},e,{others:e.others.concat([t.payload])});case b.UPDATE_HISTOGRAM:return u.__assign({},e,{histogram:t.payload});case b.UPDATE_ODDS:return u.__assign({},e,{odds:t.payload});case b.UPDATE_ID:return u.__assign({},e,{id:t.payload});case b.UPDATE:return u.__assign({},t.payload);default:return e}},k={height:"2.1em",margin:"0.05em",width:"2.1em"};function R(e){var t=e.card_text,n=e.handleClick,r=e.selected,a={backgroundColor:""},s="white";return r&&(a.backgroundColor="#efeded"),t.includes("s")?(s="info",r&&(a.backgroundColor="#1382ce")):t.includes("o")&&(s="danger",r&&(a.backgroundColor="#e4163e")),o.createElement(d.Button,{style:r?u.__assign({},k,a):k,isColor:s,className:"button",onClick:n,value:t},t)}var x=function(e){function t(t){var n=e.call(this,t)||this;return n.state={selected:void 0},n.handleClick=n.handleClick.bind(n),n}return u.__extends(t,e),t.prototype.componentDidUpdate=function(){var e=this.state.selected;e&&this.props.addPlayerCards(e)},t.prototype.render=function(){var e=this;return o.createElement("div",{className:"card-matrix"},m.map(function(t){return o.createElement(d.Container,{style:{margin:0},key:p.v4()},t.map(function(t){return o.createElement(R,{key:t,card_text:t,handleClick:e.handleClick,selected:e.state.selected===t})}))}))},t.prototype.handleClick=function(e){var t=e.target;this.setState({selected:t.value})},t}(o.Component),K=Object(i.b)(void 0,{addPlayerCards:r.addPlayerCards})(x),J=n(21),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){var e=this.props.game,t=e.histogram,n=e.player;return c.isEmpty(n)?o.createElement("div",null,"Enter a hand to show the histogram"):c.isEmpty(t)?o.createElement("div",null,"Loading..."):o.createElement(J.a,{xDomain:[0,100],width:500,yType:"ordinal",margin:{left:100,right:50},animated:!0},o.createElement(J.d,null),o.createElement(J.e,null),o.createElement(J.f,null),o.createElement(J.b,{data:t}),o.createElement(J.c,{data:t.map(function(e){return u.__assign({},e,{label:e.x.toString(),style:{fontSize:10,display:0===e.x?"none":"inherit"},xOffset:5})}),labelAnchorX:"text-after-edge",labelAnchorY:"middle",animation:!0}))},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.game,r=t.updateHistogram,a=n.player,o=n.others,s=n.board,i=n.histogram;!c.isEmpty(i)&&c.isEqual(i,e.game.histogram)||c.isEmpty(a)||c.isEqual(n.player,e.game.player)||r({hand:a,others:o,board:s})},t}(o.Component),Q=Object(i.b)(function(e){return{game:e.game}},{updateHistogram:G})(M);O.initializeApp({apiKey:"AIzaSyAyWYP4VS7IYAn4pz4xVcqvDT4K4AXXLb4",authDomain:"poker-hands-123.firebaseapp.com",databaseURL:"https://poker-hands-123.firebaseio.com",messagingSenderId:"501304823469",projectId:"poker-hands-123",storageBucket:""});var I,L={signInFlow:"popup",signInOptions:[O.auth.GoogleAuthProvider.PROVIDER_ID],signInSuccessUrl:"/signedIn"},B=O;!function(e){e.FETCH_USER="FETCH_USER",e.SIGN_OUT="SIGN_OUT",e.UPDATE_KEY="UPDATE_KEY",e.UPDATE_GAMES="UPDATE_GAMES",e.ADD_GAME="ADD_GAME",e.TOGGLE_NEW_GAME="TOGGLE_NEW_GAME",e.NEW_GAME_TRUE="NEW_GAME_TRUE",e.NEW_GAME_FALSE="NEW_GAME_FALSE"}(I||(I={}));var W=B.auth(),H=B.firestore().collection("users"),j=function(){return function(e){W.onAuthStateChanged(function(t){if(t){var n=H.doc(t.uid).collection("games");n.get().then(function(t){t.empty?n.add({createdAt:O.firestore.FieldValue.serverTimestamp()}).then(function(t){e({type:I.UPDATE_KEY,payload:t.id})}):n.orderBy("createdAt").limit(1).get().then(function(t){t.forEach(function(t){e({type:I.UPDATE_KEY,payload:t.id});var n=t.data();c.isEmpty(n.odds)||e({type:b.UPDATE_ODDS,payload:n.odds})})})}),e({payload:t,type:I.FETCH_USER})}})}},F=function(){return function(e){W.signOut().then(function(){e({type:I.SIGN_OUT})})}},Y=function(e){return function(t){H.doc(e).collection("games").orderBy("createdAt","desc").limit(25).get().then(function(e){var n=e.docs.map(function(e){return e.data()}).map(function(e){return c.isEmpty(e.player)?e:(t=e,u.__assign({},t,{player:g(t.player),board:t.board.map(y),others:t.others.map(g)}));var t});c.isEmpty(n[0].player)&&t({type:I.NEW_GAME_TRUE}),t({type:I.UPDATE_GAMES,payload:n})})}},q=function(e,t){return function(n){H.doc(e).collection("games").doc(t.id).set(t)}},z=function(e){return function(t){t({type:I.NEW_GAME_TRUE});var n=H.doc(e).collection("games"),r=n.doc(),a=u.__assign({},P,{id:r.id,createdAt:O.firestore.Timestamp.fromDate(new Date),updatedAt:null});n.doc(r.id).set(a).then(function(){t({type:b.UPDATE,payload:a})})}},V=n(91),X="L LT";function $(e){var t=e.game,n=t.updatedAt?t.updatedAt:t.createdAt,r=V.unix(n.seconds);return c.isEmpty(t.player)?o.createElement(o.Fragment,null):o.createElement(d.Card,{className:"game"},o.createElement(d.CardHeader,null,o.createElement(d.CardHeaderTitle,null,"Hand: ",h(t.player)),o.createElement(d.CardHeaderTitle,null,"(",r.format(X),")")),o.createElement(d.CardContent,null,o.createElement(d.Columns,null,t.others.map(function(e,t){return o.createElement(d.Column,{key:p.v4()},"P"+(t+2)+": "+h(e))})),o.createElement(d.Content,null,"Board: ",h(t.board))))}n(172);var Z=function(e){function t(t){return e.call(this,t)||this}return u.__extends(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props.firebase,n=t.user,r=t.games,a=t.newGame,o=this.props.game.player;n&&this.isChanged(e)&&this.props.getGames(n.uid),r.length&&c.isEmpty(o)&&!1===a&&this.props.updateGame(r[0])},t.prototype.render=function(){var e=this.props.firebase.games;return o.createElement("div",{className:"history",style:{overflow:"auto",height:"350px"}},o.createElement(d.Column,{className:"games"},e.map(function(e){return o.createElement($,{game:e,key:e.id})})))},t.prototype.isChanged=function(e){var t=this.props.firebase.user;return!c.isEqual(t,e.firebase.user)},t}(o.Component),ee=Object(i.b)(function(e){return{firebase:e.firebase,game:e.game}},{getGames:Y,setGame:q,updateGame:N})(Z),te=function(e){function t(t){var n=e.call(this,t)||this;return n.handleClick=n.handleClick.bind(n),n.state={selected:2},n}return u.__extends(t,e),t.prototype.componentDidUpdate=function(){var e=this.state.selected;e&&this.props.editNumPlayers(e)},t.prototype.render=function(){var e=this;return o.createElement("div",{className:"players"},o.createElement("b",null,"Players"),o.createElement("br",null),c.range(2,5).map(function(t){return o.createElement(d.Button,{key:p.v4(),value:t,onClick:e.handleClick,style:{backgroundColor:t===e.state.selected?"#f3f3f3":"#ffffff"}},t)}))},t.prototype.handleClick=function(e){var t=e.target.value;t&&this.setState({selected:Number(t)})},t}(o.Component),ne=Object(i.b)(void 0,{editNumPlayers:C})(te);function re(e){return o.createElement("div",{style:{marginLeft:"10px"}},o.createElement("b",null,e.player," (",e.odds.hand,")"),o.createElement("br",null),o.createElement("span",null,"Win %: ",e.odds.win),o.createElement("br",null),o.createElement("span",null,"Tie %: ",e.odds.tie))}var ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){var e=this.props.game,t=e.odds,n=e.player;if(c.isEmpty(n))return o.createElement("div",null,"Enter a hand to show the odds");if(c.isEmpty(t))return o.createElement("div",null,"Loading...");var r=h(n),a=t.find(function(e){return e.hand===r}),s=t.filter(function(e){return e.hand!==r});return o.createElement("div",{style:{display:"flex",flexWrap:"nowrap",marginLeft:"5px"}},o.createElement("h6",{className:"title is-6"},"Game Odds"),!c.isEmpty(a)&&o.createElement(re,{odds:a,player:"Player"}),!c.isEmpty(s)&&s.map(function(e,t){return o.createElement(re,{key:p.v4(),odds:e,player:"Other "+(t+1)})}))},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.game,r=t.updateOdds;if(!c.isEmpty(n.player)&&!c.isEqual(n.player,e.game.player)){for(var a=n.player,o=n.others,s=n.board,i=n.player_count,u=[a],l=0;l<i-1;l++)o[l]?u.push(o[l]):u.push({});r(u,s)}},t}(o.Component),oe=Object(i.b)(function(e){return{game:e.game}},{updateOdds:U})(ae),se=function(e){return o.createElement(l,{className:"layout",cols:12,rowHeight:30,width:window.innerWidth},o.createElement("div",{key:"history","data-grid":{x:0,y:0,w:5,h:10}},o.createElement("div",{className:"title is-6",style:{margin:0}},"History"),o.createElement(ee,null)),o.createElement("div",{key:"card-matrix","data-grid":{x:5,y:0,w:7,h:12}},o.createElement(K,null)),o.createElement("div",{key:"players","data-grid":{x:10,y:0,w:1,h:5}},o.createElement(ne,null)),o.createElement("div",{key:"histogram","data-grid":{x:5,y:12,w:5,h:10}},o.createElement(Q,null)),o.createElement("div",{key:"odds","data-grid":{x:0,y:1,w:4,h:4}},o.createElement(oe,null)))},ie=n(92),ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){return o.createElement(ie.StyledFirebaseAuth,{uiConfig:L,firebaseAuth:B.auth()})},t}(o.Component),ce=(n(182),function(e){function t(t){return e.call(this,t)||this}return u.__extends(t,e),t.prototype.render=function(){var e,t=this.props.user;return t&&(e=t.displayName),o.createElement("div",{className:"header"},o.createElement(d.Navbar,{style:{backgroundColor:"lightgrey"}},o.createElement(d.NavbarStart,null,o.createElement(d.NavbarItem,null,"Poker"),o.createElement(d.NavbarItem,null,o.createElement("b",null,e))),o.createElement(d.NavbarEnd,null,o.createElement(d.NavbarItem,null,this.getNewGameButton()),o.createElement(d.NavbarItem,null,this.getAuthButton()))))},t.prototype.getNewGameButton=function(){var e=this.props,t=e.user,n=e.handleNewGame;return t?o.createElement(d.Button,{onClick:n,isColor:"dark"},"New Game"):o.createElement(o.Fragment,null)},t.prototype.getAuthButton=function(){var e=this.props,t=e.user,n=e.signOut;return t?o.createElement(d.Button,{onClick:n,className:"sign-out",isColor:"primary"},"Sign Out"):o.createElement(ue,null)},t}(o.Component)),le=Object(i.b)(function(e){return{user:e.firebase.user}},{signOut:F})(ce),de={user:void 0,key:void 0,games:[],newGame:!1},pe=function(e,t){switch(void 0===e&&(e=de),t.type){case I.FETCH_USER:return u.__assign({},e,{user:t.payload});case I.SIGN_OUT:return u.__assign({},e,{user:void 0});case I.UPDATE_KEY:return u.__assign({},e,{key:t.payload});case I.UPDATE_GAMES:return u.__assign({},e,{games:t.payload});case I.ADD_GAME:return u.__assign({},e,{games:e.games.map(function(e){return e.id===t.payload.id?u.__assign({},e,t.payload):e})});case I.TOGGLE_NEW_GAME:return u.__assign({},e,{newGame:!e.newGame});case I.NEW_GAME_TRUE:return u.__assign({},e,{newGame:!0});case I.NEW_GAME_FALSE:return u.__assign({},e,{newGame:!1});default:return e}},me=function(e){function t(t){var n=e.call(this,t)||this;return n.createNewGame=n.createNewGame.bind(n),n}return u.__extends(t,e),t.prototype.componentDidMount=function(){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){return(0,this.props.fetchUser)(),[2]})})},t.prototype.render=function(){return o.createElement("div",{className:"App"},o.createElement(le,{handleNewGame:this.createNewGame}),o.createElement(se,null))},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.user,r=t.game;if(n&&!c.isEmpty(r.player)&&!c.isEqual(r,e.game)){var a=function(e){return u.__assign({},e,{player:E(e.player),board:e.board.map(function(e){return e.str}),others:e.others.map(E)})}(r);this.props.setGame(n.uid,a)}},t.prototype.createNewGame=function(){var e=this.props.user;e&&this.props.newGame(e.uid)},t}(o.Component),fe=Object(i.b)(function(e){return{game:e.game,user:e.firebase.user}},{fetchUser:a.fetchUser,setGame:a.setGame,newGame:a.newGame})(me),he=n(12),Ee=n(93),ge=n(94),ye={game:P,firebase:de},_e=Object(he.combineReducers)({game:S,firebase:pe}),Ae=Object(he.compose)(Object(he.applyMiddleware)(ge.a),Object(Ee.composeWithDevTools)()),ve=Object(he.createStore)(_e,ye,Ae),Te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function be(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(184),n(186),n(188),n(190);s.render(o.createElement(i.a,{store:ve},o.createElement(fe,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/royal-flush",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="/royal-flush/service-worker.js";Te?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):be(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):be(e)})}}()},95:function(e,t,n){e.exports=n(192)}},[[95,2,1]]]);
//# sourceMappingURL=main.7dfec9ef.chunk.js.map